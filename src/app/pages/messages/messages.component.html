<div class="messages-page">
  <!-- Navigation Bar -->
  <app-navbar 
    [userName]="userName"
    [userAvatar]="userAvatar"
    [notificationCount]="notificationCount"
    [messageCount]="messageCount">
  </app-navbar>

  <!-- Main Content -->
  <main class="messages-main">
    <div class="messages-container">
      
      <!-- Messages Management Card -->
      <app-card 
        padding="large"
        shadow="medium"
        class="messages-card">
        
        <!-- Card Header -->
        <div class="card-header">
          <div class="header-content">
            <h1 class="page-title">Mensajes</h1>
            <p class="page-subtitle">Gestiona todos tus mensajes para tu pequeño</p>
          </div>
          <app-button
            text="+ Agregar mensaje"
            variant="accent"
            size="medium"
            (buttonClick)="onAddMessage()">
          </app-button>
        </div>

        <!-- Filters Section -->
        <div class="filters-section">
          <div class="search-container">
            <app-search-input
              placeholder="Buscar mensajes..."
              [value]="searchValue"
              size="medium"
              (valueChange)="onSearch($event)">
            </app-search-input>
          </div>
          
          <div class="filter-container">
            <select 
              class="message-filter"
              [value]="selectedFilter"
              (change)="onFilterChange($event)">
              @for (option of filterOptions; track option.value) {
                <option [value]="option.value">{{ option.label }}</option>
              }
            </select>
          </div>
        </div>

        <!-- Messages List -->
        <div class="messages-list">
          @if (filteredMessages.length > 0) {
            @for (message of filteredMessages; track message.id) {
              <app-message-item
                [message]="message"
                (edit)="onEditMessage($event)"
                (delete)="onDeleteMessage($event)">
              </app-message-item>
            }
          } @else {
            <div class="empty-state">
              <div class="empty-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M8 12h.01"/>
                  <path d="M12 12h.01"/>
                  <path d="M16 12h.01"/>
                  <path d="M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
              </div>
              <h3 class="empty-title">No se encontraron mensajes</h3>
              <p class="empty-description">
                @if (searchValue) {
                  No hay mensajes que coincidan con tu búsqueda.
                } @else {
                  Aún no tienes mensajes. ¡Agrega tu primer mensaje!
                }
              </p>
            </div>
          }
        </div>

      </app-card>
    </div>
  </main>
</div>
